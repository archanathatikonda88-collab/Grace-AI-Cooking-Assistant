<!DOCTYPE html>
<html>
<head>
    <title>Recipe Detail Styling Test</title>
    <link rel="stylesheet" href="/static/styles.css?v=15">
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .test-container { max-width: 600px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 20px; background: #f9f9f9; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Recipe Detail Styling Test</h1>
        
        <div class="test-section">
            <h2>Image Test</h2>
            <div class="detail-image-container">
                <img id="test-image" class="detail-hero-image" alt="Test Recipe Image" 
                     src="/static/images/default_cooking.jpg" />
            </div>
        </div>
        
        <div class="test-section">
            <div class="ingredients-section">
                <h3>Ingredients</h3>
                <ul id="test-ingredients-list">
                    <li><span class="ingredient-number">1.</span><span class="ingredient-text">2 chicken breasts, boneless</span></li>
                    <li><span class="ingredient-number">2.</span><span class="ingredient-text">1 cup basmati rice</span></li>
                    <li><span class="ingredient-number">3.</span><span class="ingredient-text">2 tablespoons olive oil</span></li>
                    <li><span class="ingredient-number">4.</span><span class="ingredient-text">1 onion, finely chopped</span></li>
                    <li><span class="ingredient-number">5.</span><span class="ingredient-text">3 cloves garlic, minced</span></li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <div class="instructions-section">
                <h3>Instructions</h3>
                <ol id="test-instructions-list">
                    <li><span class="instruction-number">1</span><span class="instruction-text">Heat olive oil in a large pan over medium-high heat.</span></li>
                    <li><span class="instruction-number">2</span><span class="instruction-text">Season chicken breasts with salt and pepper, then cook for 6-7 minutes per side until golden brown.</span></li>
                    <li><span class="instruction-number">3</span><span class="instruction-text">Remove chicken from pan and set aside to rest.</span></li>
                    <li><span class="instruction-number">4</span><span class="instruction-text">In the same pan, add chopped onion and cook until translucent, about 3-4 minutes.</span></li>
                    <li><span class="instruction-number">5</span><span class="instruction-text">Add minced garlic and cook for another minute until fragrant.</span></li>
                    <li><span class="instruction-number">6</span><span class="instruction-text">Add rice and stir to coat with the aromatics, cooking for 2 minutes.</span></li>
                    <li><span class="instruction-number">7</span><span class="instruction-text">Slice the rested chicken and serve over the rice mixture.</span></li>
                </ol>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Test API Call</h2>
            <button onclick="testRecipeAPI()" style="padding: 10px 20px; background: #ff6b35; color: white; border: none; border-radius: 8px; cursor: pointer;">Test Recipe Detail API</button>
            <div id="api-result" style="margin-top: 15px; padding: 10px; background: white; border-radius: 4px; min-height: 50px;"></div>
        </div>
    </div>
    
    <script>
        async function testRecipeAPI() {
            const resultDiv = document.getElementById('api-result');
            resultDiv.innerHTML = 'Testing...';
            
            try {
                // First get suggestions
                const suggestResp = await fetch('/suggest', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ingredients: 'chicken', cuisine: 'indian', difficulty: 'easy' })
                });
                
                const suggestData = await suggestResp.json();
                console.log('Suggest response:', suggestData);
                
                if (suggestData.cards && suggestData.cards.length > 0) {
                    const recipeId = suggestData.cards[0].id;
                    
                    // Then get details
                    const detailResp = await fetch(`/api/recipe/${recipeId}`);
                    const detailData = await detailResp.json();
                    console.log('Detail response:', detailData);
                    
                    resultDiv.innerHTML = `
                        <h4>API Test Results:</h4>
                        <p><strong>Recipe Name:</strong> ${detailData.name}</p>
                        <p><strong>Image URL:</strong> ${detailData.image || 'No image'}</p>
                        <p><strong>Ingredients Count:</strong> ${detailData.ingredients ? detailData.ingredients.length : 0}</p>
                        <p><strong>Instructions Type:</strong> ${typeof detailData.instructions}</p>
                        <p><strong>Instructions Preview:</strong> ${detailData.instructions ? String(detailData.instructions).substring(0, 100) + '...' : 'No instructions'}</p>
                    `;
                } else {
                    resultDiv.innerHTML = 'No recipe cards returned';
                }
            } catch (error) {
                resultDiv.innerHTML = `Error: ${error.message}`;
                console.error('API test error:', error);
            }
        }
    </script>
</body>
</html>